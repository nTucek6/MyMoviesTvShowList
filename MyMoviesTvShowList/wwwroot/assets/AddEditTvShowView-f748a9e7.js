var L=Object.defineProperty;var P=(n,s,d)=>s in n?L(n,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):n[s]=d;var u=(n,s,d)=>(P(n,typeof s!="symbol"?s+"":s,d),d);import{d as $,r as i,a as A,y as O,o as v,c as m,i as g,q as V,g as o,h as c,v as p,f as k,F as N,s as j,k as H,t as J,p as W,l as z,_ as K}from"./index-a18159e2.js";import{u as Q,t as X}from"./tvshowparams-63f51816.js";import{s as E}from"./default.css_vue_type_style_index_1_src_true_lang-94eb8ea2.js";import{_ as Y}from"./AdminNavigationComponent.vue_vue_type_script_setup_true_lang-041ab717.js";import{u as Z}from"./moviesadmin-6e261063.js";import{u as ee}from"./globalhelper-7d76c8d7.js";class R{constructor(){u(this,"Id");u(this,"Title");u(this,"Description");u(this,"Genres");u(this,"Creators");u(this,"Actors");u(this,"Runtime");u(this,"TVShowImageData");u(this,"TotalSeason");u(this,"TotalEpisode");this.Id=0,this.Title="",this.Description="",this.Genres="",this.Creators="",this.Actors="",this.Runtime="",this.TVShowImageData=new Blob([]),this.TotalSeason=0,this.TotalEpisode=0}}const ae=n=>(W("data-v-10f77184"),n=n(),z(),n),te={key:0,class:"text-center mt-5"},le={class:"form-group mb-3"},oe={key:0,class:"lds-dual-ring"},se=["onSubmit"],ne={class:"form-group mb-3"},re={class:"form-group mb-3"},ue={class:"form-group mb-3"},ie={class:"form-group mb-3"},de={class:"form-group mb-3"},ce={class:"form-group mb-3"},pe={class:"form-group mb-3"},ve={class:"form-group mb-3"},me={class:"form-group mb-3"},he=["onUpdate:modelValue"],fe=["onUpdate:modelValue"],we={class:"form-group mb-3"},Se={class:"form-group mb-3"},Te=["src"],_e=ae(()=>o("button",{type:"submit",class:"btn w-25"},"Save TvShow",-1)),ge=$({__name:"AddEditTvShowView",setup(n){const s=Q(),d=Z();ee();const t=i(new R),S=i(),T=i(),h=i(),f=i(),b=i(),y=i(),D=i(),_=i(),I=i(!1),C=i(!1),F=A(()=>d.Genres),r=A(()=>s.EditTVShow);O(async()=>{await d.GetGenres(),G()});const G=()=>{r.value!=null&&(I.value=!0,t.value.Id=r.value.Id,t.value.Title=r.value.Title,t.value.Description=r.value.Description,t.value.Runtime=r.value.Runtime,t.value.TotalSeason=r.value.TotalSeason,t.value.TotalEpisode=r.value.TotalEpisode,r.value.Genres.map(a=>b.value.select(a.value)),r.value.Creators.map(a=>y.value.select({value:a.Id,label:a.FirstName+" "+a.LastName})),r.value.Actors.map(a=>D.value.select({value:a.Id,label:a.FirstName+" "+a.LastName,CharacterName:a.CharacterName,Description:a.CharacterDescription})),f.value="data:image/png;base64,"+r.value.TVShowImageData,s.setEditTVShow(void 0))},x=async a=>{if(a!=null){await d.GetCrew(a);const l=A(()=>d.MovieCrew);if(l.value!=null)return l.value.map(e=>({value:e.value,label:e.label}))}return null},M=a=>{if(t.value.TVShowImageData=a.target.files[0],t.value.TVShowImageData&&t.value.TVShowImageData.type.startsWith("image/")){const l=new FileReader;l.onload=e=>{f.value=e.target.result},l.readAsDataURL(t.value.TVShowImageData)}},U=()=>{t.value=new R,f.value=null,S.value=null,T.value=null,h.value=null,b.value.clear(),y.value.clear(),D.value.clear(),_.value="",I.value=!1},q=async()=>{const a=new FormData;a.append("Id",t.value.Id.toString()),a.append("Title",t.value.Title),a.append("Description",t.value.Description),a.append("Genres",S.value.map(l=>l)),a.append("Runtime",t.value.Runtime),a.append("Creators",T.value.map(l=>l)),a.append("Actors",JSON.stringify(h.value)),a.append("TVShowImageData",t.value.TVShowImageData),a.append("TotalSeason",t.value.TotalSeason.toString()),a.append("TotalEpisode",t.value.TotalEpisode.toString()),s.SaveTVShow(a).then(()=>{U()})},B=async()=>{C.value=!0,await s.GetTVShowFromAPI(_.value),G(),C.value=!1};return(a,l)=>(v(),m(N,null,[g(Y,{routes:V(X)},null,8,["routes"]),I.value?k("",!0):(v(),m("div",te,[o("div",le,[c(o("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),class:"w-50",id:"query",placeholder:"Search for movie..."},null,512),[[p,_.value]])]),C.value?(v(),m("div",oe)):(v(),m("button",{key:1,class:"btn",onClick:B},"Search"))])),o("form",{onSubmit:H(q,["prevent"]),class:"text-center mb-3 mt-5"},[o("div",ne,[c(o("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=e=>t.value.Title=e),class:"w-50",id:"title",placeholder:"TvShow title"},null,512),[[p,t.value.Title]])]),o("div",re,[c(o("textarea",{type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>t.value.Description=e),class:"w-50",id:"description",placeholder:"TvShow description"},null,512),[[p,t.value.Description]])]),o("div",ue,[c(o("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=e=>t.value.TotalSeason=e),class:"w-50",id:"totalSeason",placeholder:"TvShow total seasons"},null,512),[[p,t.value.TotalSeason]])]),o("div",ie,[c(o("input",{type:"number","onUpdate:modelValue":l[4]||(l[4]=e=>t.value.TotalEpisode=e),class:"w-50",id:"totalEpisode",placeholder:"TvShow total episodes"},null,512),[[p,t.value.TotalEpisode]])]),o("div",de,[c(o("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=e=>t.value.Runtime=e),class:"w-50",id:"runtime",placeholder:"Runtime"},null,512),[[p,t.value.Runtime]])]),o("div",ce,[g(V(E),{placeholder:"Select genres...",modelValue:S.value,"onUpdate:modelValue":l[6]||(l[6]=e=>S.value=e),options:F.value,mode:"tags","close-on-select":!1,searchable:!0,"create-option":!0,"preselect-first":!0,ref_key:"GenresDefault",ref:b},null,8,["modelValue","options"])]),o("div",pe,[g(V(E),{placeholder:"Select creators...",modelValue:T.value,"onUpdate:modelValue":l[7]||(l[7]=e=>T.value=e),mode:"tags","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:500,searchable:!0,ref_key:"CreatorsDefault",ref:y,options:async function(e,w){return await x(e)}},null,8,["modelValue","options"])]),o("div",ve,[g(V(E),{placeholder:"Select actors...",modelValue:h.value,"onUpdate:modelValue":l[8]||(l[8]=e=>h.value=e),mode:"tags","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:500,searchable:!0,object:!0,ref_key:"ActorsDefault",ref:D,options:async function(e,w){return await x(e)}},null,8,["modelValue","options"])]),o("div",me,[(v(!0),m(N,null,j(h.value,e=>(v(),m("div",{key:e.value},[o("label",null,J(e.label),1),o("div",null,[c(o("input",{type:"text",class:"w-50 ml-2",placeholder:"Character name...","onUpdate:modelValue":w=>e.CharacterName=w,required:""},null,8,he),[[p,e.CharacterName]]),c(o("textarea",{class:"w-50 ml-2 mt-2",placeholder:"Description...","onUpdate:modelValue":w=>e.Description=w,required:""},null,8,fe),[[p,e.Description]])])]))),128))]),o("div",we,[o("input",{type:"file",onChange:M,class:"w-50",id:"surname",placeholder:"Insert movie image"},null,32)]),o("div",Se,[f.value?(v(),m("img",{key:0,src:f.value,alt:"Image Preview"},null,8,Te)):k("",!0)]),o("button",{type:"button",class:"btn w-25 mr-1",onClick:U},"Clear"),_e],40,se)],64))}});const Ee=K(ge,[["__scopeId","data-v-10f77184"]]);export{Ee as default};
